# –û—Ç–ª–∞–¥–∫–∞ –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º

## üîß **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ö—É–∫ `view_projects_index_bottom`:**
- ‚úÖ **–£–±—Ä–∞–Ω ERB –∫–æ–¥** - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –æ–±—ã—á–Ω—ã–π HTML
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ö—É–∫–∞
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - fallback URL –ø—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∞ JavaScript –∫–Ω–æ–ø–∫–∞:**
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è `addExportButton()`** - —Å–æ–∑–¥–∞–µ—Ç –∫–Ω–æ–ø–∫—É —á–µ—Ä–µ–∑ JavaScript
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É –¥–≤–∞–∂–¥—ã
- ‚úÖ **–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** - –∏—â–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
- ‚úÖ **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è** - –∫—Ä–∞—Å–∏–≤–∞—è –∫–Ω–æ–ø–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º

### **3. –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞:**
- ‚úÖ **–•—É–∫** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
- ‚úÖ **JavaScript** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
- ‚úÖ **–û—Ç–ª–∞–¥–∫–∞** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ Rails –ª–æ–≥

## üöÄ **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker-compose logs -f redmine
```
–ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
- `Project Progress: Hooks loaded successfully`
- `Project Progress: view_projects_index_bottom hook called`
- `Project Progress: Export URL generated: ...`

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
–û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12) –∏ –∏—â–∏—Ç–µ:
- `Project Progress: Export button added`
- `Project Progress: No suitable container found for export button`

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–æ–≤:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/projects`
- –ò—â–∏—Ç–µ –±–ª–æ–∫ "–≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º"
- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å CSV —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º"

## üîç **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### **1. –•—É–∫ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–ª–∞–≥–∏–Ω –∑–∞–≥—Ä—É–∂–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

### **2. JavaScript –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JavaScript —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç `#content`

### **3. –ö–Ω–æ–ø–∫–∞ –Ω–µ –≤–∏–¥–Ω–∞:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSS —Å—Ç–∏–ª–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Å–∫—Ä—ã—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–π–¥–µ–Ω

## üìù **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–•—É–∫:**
```ruby
def view_projects_index_bottom(context = {})
  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  Rails.logger.info "Project Progress: view_projects_index_bottom hook called"
  
  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL
  export_url = Rails.application.routes.url_helpers.project_progress_export_path(format: 'csv')
  
  # –í–æ–∑–≤—Ä–∞—Ç HTML
  <<~HTML
    <div>...</div>
  HTML
end
```

### **JavaScript:**
```javascript
function addExportButton() {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
  if (document.querySelector('.project-progress-export-button')) {
    return;
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
  const exportButton = document.createElement('div');
  // ... —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
  
  // –í—Å—Ç–∞–≤–∫–∞ –≤ DOM
  const content = document.querySelector('#content, .main, .content, main');
  if (content) {
    content.insertBefore(exportButton, content.firstChild);
  }
}
```

## ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

1. **–ë–ª–æ–∫ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º** "–≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º"
2. **–û–ø–∏—Å–∞–Ω–∏–µ** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
3. **–ó–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É** "–°–∫–∞—á–∞—Ç—å CSV —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º"
4. **–í –ª–æ–≥–∞—Ö** —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏!
